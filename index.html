<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>העלאת תמונות לחתונה</title>
    <style>
        body { font-family: Arial; text-align: center; background: #f0f0f0; }
        #camera { width: 100%; max-width: 500px; margin: 20px auto; }
        button { padding: 15px; font-size: 18px; background: #4CAF50; color: white; border: none; cursor: pointer; }
        .banner {
            background-color: #ff9800;
            color: white;
            padding: 10px;
            margin-top: 20px;
            display: none;
        }
    </style>
</head>
<body>
    <h1>📸 צלמו תמונות כאן!</h1>
    <video id="camera"></video>
    <button onclick="capturePhoto()">צלם תמונה</button>

    <!-- Debug Banner (will show the response text) -->
    <div id="banner" class="banner"></div>

    <script>
        // Access camera
        navigator.mediaDevices.getUserMedia({ video: true })
            .then(stream => document.getElementById('camera').srcObject = stream);

        // Capture photo and upload
        async function capturePhoto() {
            const video = document.getElementById('camera');
            const canvas = document.createElement('canvas');
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            canvas.getContext('2d').drawImage(video, 0, 0);
            
            // Convert to JPEG
            const image = canvas.toDataURL('image/jpeg', 0.8);
            
            // Upload to Google Drive
            const response = await fetch('https://script.google.com/macros/s/AKfycbyw0ujmaAehCydPhITD2F7ZKGEA0dxyqw-mqLrZGrTnLTc8kbTVJJ4Td3Wyveyyb06r/exec', {
                method: 'POST',
                body: JSON.stringify({ image: image.split(',')[1] })
            });

            const responseText = await response.text();

            // Show the response text in a banner
            const banner = document.getElementById('banner');
            banner.textContent = responseText; // Display the returned text
            banner.style.display = 'block';    // Make the banner visible
        }
    </script>
</body>
</html>
